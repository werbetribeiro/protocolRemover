<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <title>Removedor de Protocolos</title>
</head>

<body>

    <div class="container">
        <h2 class="text-center m-5">Removedor de Protocolos</h2>

        <textarea class=" form-control" id="texto" style="resize: none;" rows="7"></textarea>

        <button onclick="extrairProtocolos()" class="btn btn-primary mt-4 btn-mb">Remover Protocolos</button>

        <h4 class="m-5 text-center">Números de Protocolos</h4>

        <div class="container">
            <ol id="protocolos" class="list-group list-group-numbered">

            </ol>
        </div>
    </div>

    <script>
        function extrairProtocolos() {
            var texto = document.getElementById("texto").value;
            var regex = /Protocolo\s+(\d+)/g;
            var protocolosExtraidos = [];
            var match;

            while ((match = regex.exec(texto)) !== null) {
                protocolosExtraidos.push(match[1]);
            }

            var lista = document.getElementById("protocolos");
            var listado = ""

            for (var i = 0; i < protocolosExtraidos.length; i++) {
                lista.insertAdjacentHTML("afterbegin", `<li class="list-group-item">${protocolosExtraidos[i]}</li>`)
                listado += protocolosExtraidos[i] + "\n"
            }


            const copyBtn = event.srcElement;

            copyBtn.textContent = 'Protocolos Copiados';
            copyBtn.classList.remove('btn-primary');
            copyBtn.classList.add('btn-success');

            setTimeout(function () {
                copyBtn.textContent = 'Remover Protocolos';
                copyBtn.classList.remove('btn-success');
                copyBtn.classList.add('btn-primary');
            }, 6000);

            console.log(listado)
            navigator.clipboard.writeText(listado)
                .then(function () {
                    console.log("Protocolos copiados para a área de transferência!")
                })
                .catch(function (error) {
                    alert("Erro ao Copiar + error")
                })
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

</body>

</html>